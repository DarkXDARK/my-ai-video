<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ÙˆÙ„Ø¯ ÙÙŠØ¯ÙŠÙˆ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 p-4 font-sans">
  <div class="max-w-xl mx-auto bg-white shadow-xl rounded-xl p-6 space-y-4">
    <h1 class="text-2xl font-bold text-center mb-4">ğŸ¥ Ù…ÙˆÙ„Ø¯ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„ØµÙˆØ±</h1>

    <input type="file" id="imageInput" multiple accept="image/*"
           class="w-full p-2 border rounded-md"/>

    <div id="preview" class="grid grid-cols-3 gap-2 mt-2"></div>

    <button onclick="uploadImages()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">
      âš™ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    </button>

    <div id="status" class="text-center text-sm mt-2"></div>

    <div id="videoResult" class="mt-4 text-center"></div>
  </div>

  <script>
    const API_KEY = "key_6ed2397f66edbb1bba927b06e94139079c33d19e81b4e0bc755e913455b83a384815eb1ff4f66245902366e530a0f99db833a76119f216ddca06f1df77ebade6";

    async function uploadImages() {
      const files = document.getElementById("imageInput").files;
      if (!files.length) return alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¨Ø¹Ø¶ Ø§Ù„ØµÙˆØ±.");

      document.getElementById("status").textContent = "ğŸ“¤ Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±...";

      // ğŸ”„ Ù†Ø­Ù…Ù„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ imgbb.com (Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ©)
      const imageUrls = [];

      for (const file of files) {
        const formData = new FormData();
        formData.append("image", file);
        const res = await fetch("https://api.imgbb.com/1/upload?key=c0e2b4b6f8cb952f80d651affe18eda3", {
          method: "POST",
          body: formData
        });
        const data = await res.json();
        imageUrls.push(data.data.url);
      }

      document.getElementById("status").textContent = "ğŸš€ Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...";

      // ğŸ”— Ø¥Ø±Ø³Ø§Ù„ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ Runway API
      const runwayRes = await fetch("https://api.runwayml.com/v1/gen2/image-to-video", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${API_KEY}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          image_urls: imageUrls,
          fps: 12,
          interpolation: true,
          output_format: "mp4"
        })
      });

      const videoData = await runwayRes.json();

      if (videoData.video_url) {
        document.getElementById("videoResult").innerHTML = `
          <p class="mb-2">âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:</p>
          <video controls class="w-full rounded-md shadow">
            <source src="${videoData.video_url}" type="video/mp4">
          </video>
        `;
        document.getElementById("status").textContent = "";
      } else {
        document.getElementById("status").textContent = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.";
      }
    }

    // ğŸ‘ï¸â€ğŸ—¨ï¸ Ø¹Ø±Ø¶ ØµÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    document.getElementById("imageInput").addEventListener("change", function() {
      const preview = document.getElementById("preview");
      preview.innerHTML = "";
      for (const file of this.files) {
        const reader = new FileReader();
        reader.onload = e => {
          const img = document.createElement("img");
          img.src = e.target.result;
          img.className = "w-full rounded shadow";
          preview.appendChild(img);
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html>
